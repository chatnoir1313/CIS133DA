<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="amigos.css">
    <title>Your Ticket to Animal Amigos</title>
</head>

<body>

    <div id="aa_logo">
        <img src="./images/animal_amigos_shelter.PNG" style="width:300px;" alt="Animals in Sombreros" />
    </div>

    <form id="form">
        <table>
            <tr>
                <td>Amigo's Name</td>
                <td><input type="text" name="amigo_name" id="amigo_name" required style="width:150px;" /></td>
            </tr>
            <tr>
                <td>Amigo Type</td>
                <td>
                    <select name="amigo_type" id="amigo_type" style="width:100%">
                        <option>Select One</option>
                        <option value="dog">Dog</option>
                        <option value="cat">Cat</option>
                        <option value="bird">Bird</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Amigo Size</td>
                <td id="size_td">
                    <input type="radio" name="amigo_size" id="small" value="small" checked>&nbsp;S
                    <input type="radio" name="amigo_size" id="medium" value="medium">&nbsp;M
                    <input type="radio" name="amigo_size" id="large" value="large">&nbsp;L
                </td>
            </tr>
            <tr>
                <td colspan="2" style="text-align:right;"">
                    <input type="button" value="Cancel" onclick="cancelTicket()" />
                    <input type="button" value="Print Ticket" onclick="printTicket()" />
                </td>
            </tr>
        </table>
    </form>

    <ticket id="ticket" style="display: none;">
        <ownerInfo>
            <p>Sr. Amigo's Name</p>
            <p><span class="boldText" id="ownerName">???</span></p>
            <p>Date of Visit</p>
            <p><span class="boldText" id="visitDate">??/??/????</span></p>
        </ownerInfo>

        <amigoInfo>
            <p>My New Jr. Amigo</p>
            <img id="amigoPicture" src="./images/placeholder.png" style="height:150px;" />
            <p><span class="boldText" id="amigoName">???</span></p>
        </amigoInfo>
    </ticket>
</body>

<script lang="javascript">

var amigoName;
var amigoType;
var amigoSize;

document.getElementById('form').addEventListener('submit', function(event) {
    event.preventDefault();

    amigoName = document.getElementById('amigo_name').value;

    var amigoTypeDropdown = document.getElementById('amigo_type');
    amigoType = amigoTypeDropdown.options[amigoTypeDropdown.selectedIndex].value;

    var sizeInputs = document.getElementsByName('amigo_size');
    for (var i = 0; i < sizeInputs.length; i++) {
        if (sizeInputs[i].checked) {
            amigoSize = sizeInputs[i].value;
            break;
        }
    }

    console.log('Captured Amigo Name:', amigoName);
    console.log('Captured Amigo Type:', amigoType);
    console.log('Captured Amigo Size:', amigoSize);

    var amigoNameElement = document.getElementById('amigoName');
    amigoNameElement.innerText = amigoName;

    var amigoPictureElement = document.getElementById('amigoPicture');

    var imageSrc = `./images/${amigoType}_${amigoSize}.png`;

    amigoPictureElement.src = imageSrc;

    var formElement = document.getElementById('form');

    formElement.style.display = 'none';

    alert('Ticket can now be printed!');
});

    function printTicket() {
        var ticketElement = document.getElementById('ticket');

        var amigoName = document.getElementById('amigoName').innerText;

        var amigoType = document.getElementById('amigo_type').value;
        var amigoSize = document.querySelector('input[name="amigo_size"]:checked').value;

        var imageSource = './images/' + amigoPicture + '_' + amigoSize + '.png';

        if (ticketElement.style.display === 'none') {
            ticketElement.style.display = 'block';
        } else {
            ticketElement.style.display = 'none';
        }
}


    amigoName = document.getElementById('amigo_name').value;
    var name = window.prompt('Enter your first name');
    var date = window.prompt('Enter the date you want to visit');
    document.title = `${name}'s Ticket to Animal Amigos`;
    document.getElementById('ownerName').innerText = name;
    document.getElementById('visitDate').innerText = date;

    function cancelTicket() {
        window.close();
    }

</script>
</html>